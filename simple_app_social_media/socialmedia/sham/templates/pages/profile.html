<!-- pages/profile.html -->

{% extends 'pages/base.html' %}
{% load static %}

{% block content %}
<div class="profile-info">
    {% if profile %}
        <div class="prof center">
            <h1>{{ profile.user }}</h1>
        </div>
        <div class="left">
            <p>{{ profile.date_created }}</p>
        </div>
        <div class="container form-container">
            <div class="companions right">
                {% if profile.companian %}
                    {% for com in profile.companian.all %}
                        <div>{{ com }}</div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="center">
                <div>
                    <form method="post">
                        {% csrf_token %}
                        <div>
                            {{ form.body.label_tag }}
                            {{ form.body }}
                        </div>
                        <div>
                            <button type="submit">Post Lekh</button>
                        </div>
                    </form>
                </div>
                <div>
                    {% if lekhs %}
                        {% for lekh in lekhs %}
                            <div class="lekh">
                                <div class="profile"><a  href="{% url 'profile' lekh.profile.id %}">{{ lekh.profile }}</a></div>
                                <div class="body">{{ lekh.body }}</div>
                                <div class="date">{{ lekh.date_created }}</div>
                                <div class="likes">
                                    <i {% if request.user.profile_set.exists and request.user.profile_set.first in lekh.likes.all %}id="unlike"{% else %}id="like"{% endif %} class="fa fa-thumbs-up"></i>
                                    <span>{{ lekh.no_of_likes }} Likes</span>
                                    <button hidden class="like-button">Like</button>
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
